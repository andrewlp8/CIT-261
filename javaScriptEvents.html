<!DOCTYPE html>

<html lang="en-us">
<head>
    <meta charset="utf-8" />
    <title>JavaScript Events</title>
    <link rel="stylesheet" type="text/css" href="main.css">
    <script>
    function startup() {
      var el = document.getElementByTagname("canvas")[0];
      el.addEventListener("touchstart", handleStart, false);
      el.addEventListener("touchend", handleEnd, false);
      el.addEventListener("touchcancel", handleCancel, false);
      el.addEventListener("touchmove", handleMove, false);
      log("initialized.");
    }
    function handleStart(evt) {
  evt.preventDefault();
  log("touchstart.");
  var el = document.getElementsByTagName("canvas")[0];
  var ctx = el.getContext("2d");
  var touches = evt.changedTouches;

  for (var i = 0; i < touches.length; i++) {
    log("touchstart:" + i + "...");
    ongoingTouches.push(copyTouch(touches[i]));
    var color = colorForTouch(touches[i]);
    ctx.beginPath();
    ctx.arc(touches[i].pageX, touches[i].pageY, 4, 0, 2 * Math.PI, false);  // a circle at the start
    ctx.fillStyle = color;
    ctx.fill();
    log("touchstart:" + i + ".");
  }
}
function handleMove(evt) {
  evt.preventDefault();
  var el = document.getElementsByTagName("canvas")[0];
  var ctx = el.getContext("2d");
  var touches = evt.changedTouches;

  for (var i = 0; i < touches.length; i++) {
    var color = colorForTouch(touches[i]);
    var idx = ongoingTouchIndexById(touches[i].identifier);

    if (idx >= 0) {
      log("continuing touch "+idx);
      ctx.beginPath();
      log("ctx.moveTo(" + ongoingTouches[idx].pageX + ", " + ongoingTouches[idx].pageY + ");");
      ctx.moveTo(ongoingTouches[idx].pageX, ongoingTouches[idx].pageY);
      log("ctx.lineTo(" + touches[i].pageX + ", " + touches[i].pageY + ");");
      ctx.lineTo(touches[i].pageX, touches[i].pageY);
      ctx.lineWidth = 4;
      ctx.strokeStyle = color;
      ctx.stroke();

      ongoingTouches.splice(idx, 1, copyTouch(touches[i]));  // swap in the new touch record
      log(".");
    } else {
      log("can't figure out which touch to continue");
    }
  }
}
function handleEnd(evt) {
  evt.preventDefault();
  log("touchend");
  var el = document.getElementsByTagName("canvas")[0];
  var ctx = el.getContext("2d");
  var touches = evt.changedTouches;

  for (var i = 0; i < touches.length; i++) {
    var color = colorForTouch(touches[i]);
    var idx = ongoingTouchIndexById(touches[i].identifier);

    if (idx >= 0) {
      ctx.lineWidth = 4;
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.moveTo(ongoingTouches[idx].pageX, ongoingTouches[idx].pageY);
      ctx.lineTo(touches[i].pageX, touches[i].pageY);
      ctx.fillRect(touches[i].pageX - 4, touches[i].pageY - 4, 8, 8);  // and a square at the end
      ongoingTouches.splice(idx, 1);  // remove it; we're done
    } else {
      log("can't figure out which touch to end");
    }
  }
}
function handleCancel(evt) {
  evt.preventDefault();
  log("touchcancel.");
  var touches = evt.changedTouches;

  for (var i = 0; i < touches.length; i++) {
    var idx = ongoingTouchIndexById(touches[i].identifier);
    ongoingTouches.splice(idx, 1);  // remove it; we're done
  }
}
function colorForTouch(touch) {
  var r = touch.identifier % 16;
  var g = Math.floor(touch.identifier / 3) % 16;
  var b = Math.floor(touch.identifier / 7) % 16;
  r = r.toString(16); // make it a hex digit
  g = g.toString(16); // make it a hex digit
  b = b.toString(16); // make it a hex digit
  var color = "#" + r + g + b;
  log("color for touch with identifier " + touch.identifier + " = " + color);
  return color;
}
    // on mouse over and out
    function changeColorOnMouseOver() {
      var control = document.getElementById('btn');
      control.style.background = 'green';
      control.style.color = 'red';
      control.style.font = '25px';
      control.value = 'Merry Christmas - HoHoHo!';
    }
    function changeColorOnMouseOut() {
      var control = document.getElementById('btn');
      control.style.background = 'black';
      control.style.color = 'white';
      control.value = 'Just Kidding - HAHAHA!';
    }


    // on blur and on key up
    function validateRequiredField(valueId) {
      var id = document.getElementById(valueId);
      id.style.color = 'black';
      if (id.value == "") {
        id.style.background = 'rgba(255, 0, 0, .5)';
      }
      else {
        id.style.background = 'rgba(46, 204, 138, 0.6)';
      }
    }

    // on document loaded
    window.onload = function onLoadEx() {
      window.open('popUp.html')
    }

    </script>
</head>
<body>
  <div id="wholeContainer">
  <div class="containerOne">
    <h1>Andrew Petersen</h1>
    <h3>JavaScript Events</h3>
  </div>
  <div class="menu">
    <nav>
      <ul>
        <li><a id="home" href="html5Tags.html">Next</a></li>
        <li><a id="home" href="cssTransitionsUsingJavaScript.html">Previous</a></li>
        <li><a id="home" href="index.html">Back to Home</a></li>
      </ul>
    </nav>
  </div>

  <div class="containerOne">
    <h4>JavaScript Events Especially for Mobile Devices (onTouchBegin) and Animation and Transition Events</h4>
<p>There are many many events – key press, mouse, touch, document loaded… You need to experiment with more than just mouse over.</p>
  </div>

      <div class="containerThree">
        <h4>Event handlers</h4>
        <h5>Example</h5>
        <canvas width="600" height="600" id="canvas" style="border: solid black 1px;">
          Your browser does not support canvas element.
        </canvas>
        <br>
        <button onclick="startup()">Initialize</button>
        <br>
        Log: <pre id="log" style="border: 1px solid #ccc;"></pre>

      </div>
  <br><br/><hr>







<div class="containerTwo">
  <h4>Event: About and References</h4>
    <p><a href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events">Events </a> are actions or occurrences that happen in the system you are programming, which the system tells you about so you can respond to them in some way if desired.</p>

    <div class="containerThree">
      <h4>Onload Pop Up</h4>
      <h5>Syntax</h5>
      <img src="images\JavaScriptEvents\onLoadSyntax.png" alt="On Load Syntax">
      <h5>Example</h5>
      <img src="images\JavaScriptEvents\onLoadEx.png" alt="On Load Example"><br><br/>
      <p>Here is the popUp in an iframe, in case your browser blocked it.</p>
      <p>By the way in case you were wondering, there is really zero reason for the spinning color wheel besides just me practicing a spinning image in JavaScript and adding space to the frame.</p>
      <iframe src="popUp.html" style="max-width: 100%; width: 600px; height: 300px; margin: 0 auto;"></iframe><br><br/>
    </div>
<br><br/><hr>
    <div class="containerThree" style="clear: all;">
      <h4>Button Color Change</h4>
      <h5>Syntax</h5>
      <img src="images\JavaScriptEvents\buttonSyntax.png" alt="Button Example">
      <h5>Example</h5>
      <img src="images\JavaScriptEvents\buttonEx1.png" alt="Button Example">
      <img src="images\JavaScriptEvents\buttonEx2.png" alt="Button Example"><br><br />

      <input style="width: 200px; height: 100px;" id="btn" type="button" value="Hover - Over and Out"
        onmouseover="changeColorOnMouseOver()"
        onmouseout="changeColorOnMouseOut()" /><br><br />
    </div>
<br><br/><hr>
    <div class="containerThree">
      <h4>On Key Up & On Blur</h4>
      <h5>Syntax</h5>
      <img src="images\JavaScriptEvents\onKeySyntax.png" alt="on Key Syntax">
      <h5>Example</h5>
      <img src="images\JavaScriptEvents\onKeyEx.png" alt="on Key Example"><br><br />
      <p>As you type characters it will turn green suggesting valid input.</p>
      <p>If characters are deleted and left blank it will turn red suggesting invalid.</p>
      <table>
        <tr>
          <td>
            First Name
          </td>
          <td>
            <input type="text" id="txtFirstName" onkeyup="validateRequiredField('txtFirstName')"
            onblur="validateRequiredField('txtFirstName')"/>
          </td>
        </tr>
        <tr>
          <td>
            Last Name
          </td>
          <td>
            <input type="text" id="txtLastName" onkeyup="validateRequiredField('txtLastName')"
            onblur="validateRequiredField('txtLastName')"/>
          </td>
        </tr>
      </table>
      <br><br />
    </div>
</div>

    <br><br/><hr>
</div>
    <footer>
        <p>Andrew Petersen - CIT 261</p>
    </footer>

</body>
</html>
